---
title: "PIP Seminar"
subtitle: "API, Stata wrapper and R wrapper"
format:
  revealjs:
    # css: tachyons.css
    theme: dark
    slide-number: true
    chalkboard: 
      buttons: false
    preview-links: auto
    logo: img/WB-PIP-E-horizontal-RGB-med.png
---

# PIP API

## What's an API

![](https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/27f810ea-2722-455a-9a0d-bb5b54c28393/api-based-platforms-api-diagram.png){.absolute top="200" right="50"}

## Access the PIP API

<!-- ![](img/access_PIP_api.png) -->

## Documentation Page

![](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOWQ1YTMwNjk3NDE5ZTAzMjYyMzZhMjg2OTFhYjZlMzdkZjhhMTNiZCZlcD12MV9pbnRlcm5hbF9naWZzX2dpZklkJmN0PWc/tkcJO0Z56CTI9fl8lc/giphy.gif){fig-align="center"}

## API endpoint

<https://api.worldbank.org/pip/v1/pip?country=COL&format=csv>

## Breaking down the URL

<!-- ![](img/url_breakdown.png){.absolute top="200" right="50"} -->

# Stata client (wrapper)

## Installation {auto-animate="true"}

### SSC

``` stata
ssc install pip
```

### Github

``` stata
net install github, from("https://haghish.github.io/github/")  
github install worldbank/pip
```

## Installation {auto-animate="true"}

### SSC

``` stata
ssc install pip
```

### Github

``` stata
net install github, from("https://haghish.github.io/github/")  
github install worldbank/pip, version(0.9.5.9002)
```

::: aside
-   For installation issues see <https://worldbank.github.io/pip/>
-   Report issues in the Stata package at <https://github.com/worldbank/pip/issues>
:::

## Country-level estimates

``` stata
/* To query poverty at \$2.15-a-day poverty line for Bangladesh in 2016 */

pip, country(bgd) year(2016) clear
```

<br />

. . .

``` stata
/* For extrapolated and interpolated data that 
underpin the global and regional poverty numbers, use 
`fillgaps` option */

pip, country(bgd) year(2019) clear fillgaps
```

<br />

. . .

``` stata
/* Data for all years or all countries */
pip, country(bgd) year(all) clear fillgaps
pip, country(all) year(2019) clear fillgaps
```

## Global and regional poverty estimates

``` stata
/* Adding `wb` subcommand queries PIP for all regions 
including the global estimates from 1981 onwards */

pip wb, clear
```

<br />

. . .

``` stata
/* Query a particular region or global values with `region()` */

pip wb, clear region(wld)
pip wb, clear region(lac)
```

. . .

[Regional classifications are based on PIP definition. <br /> PIP regions do not match one-to-one with the World Bank regions. <br /> PIP has a group for other high-income countries (OHI).]{.f4}

## Poverty lines

``` stata
/*Query poverty at other thresholds*/

pip, country(bgd) year(2019) clear ///
fillgaps povline(6.85)
```

<br />

. . .

``` stata
/*Or multiple thresholds*/

pip, country(bgd) year(2019) clear ///
fillgaps povline(2.15 3.65 6.85 10)
```

## ICP (PPP) rounds

``` stata
/*By default, estimates are reported in the most recent 
PPP round*/

pip, country(bgd) year(2016) clear
```

<!-- ![](img/bgd_2017PPP.png){fig-align="center"} -->

. . .

``` stata
/*But we could change it with the option `ppp()`*/

pip, country(bgd) year(2016) ppp(2011) clear
```

<!-- ![](img/bgd_2011PPP.png){fig-align="center"} -->
